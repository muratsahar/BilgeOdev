@using BilgeadamHomework.Models.EntityFramework
@model List<Departman>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@if (User.IsInRole("A"))
{
    <a class="btn btn-success" href="/Departman/Yeni">Yeni Departman</a>
}
    <h2>Departmanlar Listesi</h2>
    <br />
    <table class="table table-bordered" id="tblDepartmanlar">
        <thead>
            <tr>
                <th>ID</th>
                <th>Ad</th>
                <th>Güncelle</th>
                <th>Sil</th>
                <th>Personeller</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var departman in Model)
            {
            <tr>
                <td>@departman.Id</td>
                <td>@departman.Ad</td>
                <td><a class="btn btn-primary" href="/Departman/Guncelle/@departman.Id">Güncelle</a></td>

                <td><a class="btn btn-warning" href="/Departman/Sil/@departman.Id">Sil</a></td>
                
                <td>@Ajax.ActionLink("Personelleri Göster", "PersonelleriListele", "Personel", new { id = departman.Id }, new AjaxOptions{HttpMethod="GET",UpdateTargetId="personelListesi"}, new { @class="btn btn-primary"})</td>
            </tr>
            }

        </tbody>
    </table>
<div id="personelListesi"></div>

